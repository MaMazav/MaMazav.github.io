var u=t();self.asyncProxyScriptBlob=new u;
function t(){function c(){this.c=["'use strict';"];this.O=this.u=null;this.i(t,"BlobScriptGenerator");this.m("var asyncProxyScriptBlob = new BlobScriptGenerator();")}c.prototype.i=function(a,d){if(this.u)throw Error("Cannot add member to AsyncProxyScriptBlob after blob was used");d&&(this.c.push("var "),this.c.push(d),this.c.push(" = "));this.c.push("(");this.c.push(a.toString());this.c.push(")();")};c.prototype.m=function(a){if(this.u)throw Error("Cannot add statement to AsyncProxyScriptBlob after blob was used");this.c.push(a)};
c.prototype.getBlob=function(){this.u||(this.u=new Blob(this.c,{type:"application/javascript"}));return this.u};c.prototype.Oa=function(){this.O||(this.O=URL.createObjectURL(this.getBlob()));return this.O};return c};function v(){function c(b){if(null===d)throw"AsyncProxy internal error: SubWorkerEmulationForChrome not initialized";this.I=++a;d[this.I]=this;self.postMessage({type:"subWorkerCtor",l:this.I,Va:b})}var a=0,d=null;c.Qa=function(b){d=b};c.prototype.postMessage=function(b,a){self.postMessage({type:"subWorkerPostMessage",l:this.I,data:b},a)};c.prototype.terminate=function(b,a){self.postMessage({type:"subWorkerTerminate",l:this.I},a)};self.asyncProxyScriptBlob.i(v,"SubWorkerEmulationForChrome");return c}
var w=v();function x(){function c(f,b,k,g){var e=this;g=g||{};var l=a.toString(),l=l.replace("SCRIPT_PLACEHOLDER",h.Oa()),l=URL.createObjectURL(new Blob(["(",l,")()"],{type:"application/javascript"}));e.C=[];e.v=[];e.W=[];e.X=[];e.K=new Worker(l);e.K.onmessage=function(f){d(e,f)};e.Y=null;e.G=0;e.fa=g.functionsBufferSize||5;e.U=[];e.K.postMessage({$:"ctor",Wa:f,Na:b,j:k,a:++m,ta:!1,Ta:c.pa()})}function a(){importScripts("SCRIPT_PLACEHOLDER");AsyncProxy.AsyncProxySlave=self.AsyncProxy.AsyncProxySlaveSingleton;
AsyncProxy.AsyncProxySlave.Ea()}function d(f,a){var k=a.data.a;switch(a.data.type){case "functionCalled":--f.G;g(f);break;case "promiseResult":var d=f.v[k];delete f.v[k];d.resolve(a.data.result);break;case "promiseFailure":d=f.v[k];delete f.v[k];d.reject(a.data.reason);break;case "userData":null!==f.Y&&f.Y(a.data.cb);break;case "callback":k=f.C[a.data.a];if(void 0===k)throw"Unexpected message from SlaveWorker of callback ID: "+a.data.a+". Maybe should indicate isMultipleTimesCallback = true on creation?";
k.ca||f.oa(f.C[a.data.a]);null!==k.na&&k.na.apply(null,a.data.j);break;case "subWorkerCtor":var k=new Worker(a.data.Va),e=a.data.l;f.W[e]=k;f.X.push(k);k.onmessage=function(a){b(f,a.ports,!1,{$:"subWorkerOnMessage",l:e,data:a.data})};break;case "subWorkerPostMessage":k=f.W[a.data.l];k.postMessage(a.data.data);break;case "subWorkerTerminate":k=f.W[a.data.l];k.terminate();break;default:throw"Unknown message from AsyncProxySlave of type: "+a.data.type;}}function b(f,a,b,d){f.G>=f.fa?f.U.push({ab:a,Ra:b,
message:d}):e(f,a,b,d)}function e(f,a,b,d){b&&++f.G;f.K.postMessage(d,a)}function g(f){for(;f.G<f.fa&&0<f.U.length;){var a=f.U.shift();e(f,a.ab,a.Ra,a.message)}}var h=self.asyncProxyScriptBlob,m=0,l=!1,p=function(){var f=location.href,a=f.lastIndexOf("/");0<=a&&(f=f.substring(0,a));return f}();c.prototype.$a=function(a){this.Y=a};c.prototype.terminate=function(){this.K.terminate();for(var a=0;a<this.X.length;++a)this.X[a].terminate()};c.prototype.ma=function(a,d,k){k=k||{};var c=!!k.isReturnPromise,
g=k.transferables,l=k.pathsToTransferablesInPromiseResult,h=++m,p=null,r=this;c&&(p=new Promise(function(a,f){r.v[h]={resolve:a,reject:f}}));(k.isSendImmediately?e:b)(this,g,!0,{$:a,j:d||[],a:h,ta:c,Ua:l});if(c)return p};c.prototype.eb=function(a,b,d){d=d||{};var e=++m;b={Sa:!0,ca:!!d.isMultipleTimeCallback,a:e,Ma:b,wa:d.pathsToTransferables};this.C[e]={ca:!!d.isMultipleTimeCallback,a:e,na:a,wa:d.pathsToTransferables};return b};c.prototype.oa=function(a){delete this.C[a.a]};c.pa=function(){l=!0;return p};
c.Ha=function(a){if(p!==a&&l)throw"Previous values returned from getMasterEntryUrl is wrong. Avoid calling it within the slave c`tor";p=a};h.i(x,"AsyncProxyMaster");return c}var y=x();function z(){function c(){var a;try{for(var d=l.split("."),e=self,c=0;c<d.length;++c)e=e[d[c]];var d=e,g=[null].concat(b(arguments));a=new (Function.prototype.bind.apply(d,g))}catch(h){throw Error("Failed locating class name "+l+": "+h);}return a}function a(a,d){if(void 0!==a){for(var b=Array(a.length),e=0;e<a.length;++e){for(var c=a[e],g=d,l=0;l<c.length;++l)g=g[c[l]];b[e]=g}return b}}function d(a){var d=a.data.$,b=a.data.j,g=a.data.a,p=a.data.ta,H=a.data.Ua;switch(d){case "ctor":self.AsyncProxy.AsyncProxyMaster.Ha(a.data.Ta);
g=a.data.Wa;l=a.data.Na;for(var n=0;n<g.length;++n)importScripts(g[n]);h=c.apply(null,b);return;case "subWorkerOnMessage":m[a.data.l].onmessage({data:a.data.data});return}b=Array(a.data.j.length);for(n=0;n<a.data.j.length;++n){var q=a.data.j[n];void 0!==q&&null!==q&&q.Sa&&(q=e.ya(q));b[n]=q}for(var n=h,r;n&&!(r=h[d]);)n=n.__proto__;if(!r)throw"AsyncProxy error: could not find function "+r;b=r.apply(h,b);p&&e.za(g,b,H);self.postMessage({type:"functionCalled",a:a.data.a,result:null})}function b(a){for(var b=
Array(a.length),d=0;d<a.length;++d)b[d]=a[d];return b}var e={},g=null,h,m={},l;e.Ea=function(){self.onmessage=d};e.Za=function(a){c=a};e.Ya=function(a){g=a};e.Xa=function(a){self.postMessage({type:"userData",cb:a})};e.za=function(d,b,e){b.then(function(b){var c=a(e,b);self.postMessage({type:"promiseResult",a:d,result:b},c)})["catch"](function(a){self.postMessage({type:"promiseFailure",a:d,reason:a})})};e.ya=function(d){var e=!1;return function(){if(e)throw"Callback is called twice but isMultipleTimeCallback = false";
var c=b(arguments);if(null!==g)try{g.call(h,"callback",d.Ma,c)}catch(l){console.log("AsyncProxySlave.beforeOperationListener has thrown an exception: "+l)}var m=a(d.wa,c);self.postMessage({type:"callback",a:d.a,j:c},m);d.ca||(e=!0)}};e.S=function(){return A.S(Error())};if(void 0===self.Worker){var p=self.SubWorkerEmulationForChrome;p.Qa(m);self.Worker=p}self.asyncProxyScriptBlob.i(z,"AsyncProxySlaveSingleton");return e}var B=z();function C(){function c(){this.V={};this.w=null}c.prototype.La=function(a){a=c.S(a);this.V[a]||(this.V[a]=!0,this.w=null)};c.prototype.Pa=function(){if(null===this.w){this.w=[];for(var a in this.V)this.w.push(a)}return this.w};c.S=function(a){var d=a.stack.trim(),b=/at (|[^ ]+ \()([^ ]+):\d+:\d+/.exec(d);if(b&&""!==b[2])return b[2];if((b=(new RegExp(/.+\/(.*?):\d+(:\d+)*$/)).exec(d))&&""!==b[1])return b[1];if(void 0!=a.fileName)return a.fileName;throw"ImageDecoderFramework.js: Could not get current script URL";
};self.asyncProxyScriptBlob.i(C,"ScriptsToImportPool");return c}var A=C();var D=function(){function c(){this.R={g:null,H:this};this.F={f:null,H:this};this.D=0;this.F.g=this.R;this.R.f=this.F}c.prototype.add=function(a,d){if(null===d||void 0===d)d=this.F;this.J(d);++this.D;var b={Ja:a,f:d,g:d.g,H:this};b.g.f=b;return d.g=b};c.prototype.remove=function(a){this.J(a);--this.D;a.g.f=a.f;a.f.g=a.g;a.H=null};c.prototype.ba=function(a){this.J(a);return a.Ja};c.prototype.aa=function(){return this.L(this.R)};c.prototype.L=function(a){this.J(a);return a.f===this.F?null:a.f};c.prototype.J=
function(a){if(a.H!==this)throw"iterator must be of the current LinkedList";};return c}();var E=function(){function c(a){this.P=[];this.ha=a}c.prototype.bb=function(a,d){var b=this.ha.getHashCode(a),e=this.P[b];e||(e=new D,this.P[b]=e);b={Da:b,ga:e,h:null};for(b.h=e.aa();null!==b.h;){var c=e.ba(b.h);if(this.ha.isEqual(c.key,a))return{iterator:b,sa:!1,value:c.value};b.h=e.L(b.h)}c=d();b.h=e.add({key:a,value:c});return{iterator:b,sa:!0,value:c}};c.prototype.remove=function(a){a.ga.remove(a.h);0===a.ga.D&&delete this.P[a.Da]};return c}();function F(){function c(a,b,e,c){this.Ka=c;this.Ca=b;this.Ba=e;this.Ga=a;this.la=new E(c);this.Z=[]}var a=self.asyncProxyScriptBlob;c.prototype.xa=function(a,b){var c=this,g=this.la.bb(a,function(){return{ua:!1,s:0,va:null,qa:!1,ra:!1,da:!1,ea:null,N:null,o:[],B:new D,M:[],ended:function(){for(var a=this.o,b=0;b<a.length;++b)a[b].unregister();this.o=[];c.la.remove(g.iterator)}}}),h=g.value,m=this.Aa(h,b);g.sa&&this.Ia(a,h);return m};c.prototype.Aa=function(a,b){var c={b:a,A:null,T:0,Fa:b,hasData:function(){return this.b.qa},
getLastData:function(){return this.b.va},setPriority:function(a){if(!this.A)throw"AsyncProxy.DependencyWorkers: Already unregistered";a=a>this.b.s?a:this.T<this.b.s?this.b.s:this.ia();this.ja(a)},unregister:function(){if(!this.A)throw"AsyncProxy.DependencyWorkers: Already unregistered";this.b.B.remove(this.A);this.A=null;if(0==this.b.B.D)this.b.ended(),this.b.N.unregistered();else if(this.T===this.b.s){var a=this.ia();this.ja(a)}},ia:function(){var b;b=a.B;for(var c=b.aa(),e=0;null!=c;)e=b.ba(c).T,
c=b.L(c);return e},ja:function(a){if(this.b.s!==a){this.b.s=a;this.b.N.setPriority(a);for(var b=this.b.o,d=0;d<b.length;++d)b[d].setPriority(a)}}};c.A=a.B.add(c);return c};c.prototype.Ia=function(a,b){taskContext=this.Ka.createTaskContext(a,function(c){b.ra?(b.ea=c,b.da=!0):g.ka(b,c,a)},function(){if(b.ua)throw"AsyncProxy.DependencyWorkers: already terminated";b.ua=!0;b.ended()});b.N=taskContext;var c=taskContext.dependsOnTasks;if(!taskContext.setPriority)throw"AsyncProxy.DependencyWorkers: missing taskContext.setPriority()";
if(!taskContext.unregistered)throw"AsyncProxy.DependencyWorkers: missing taskContext.unregistered()";if(c&&!taskContext.onDependencyTaskResult)throw"AsyncProxy.DependencyWorkers: Cannot accept dependsOnTasks without onDependencyTaskResult in taskContext";var g=this;b.M=Array(c.length);for(var h=0;h<c.length;++h){b.M[h]=!1;var m;(function(a){m=g.xa(c[a],function(d){b.N.onDependencyTaskResult(d,c[a]);b.M[a]=!0})})(h);b.o.push(m)}setTimeout(function(){for(var a=0;a<b.o.length;++a){var d=b.o[a];if(!b.M[a]&&
d.hasData())taskContext.onDependencyTaskResult(d.getLastData,c[a])}})};c.prototype.ka=function(a,b,c){var g=this,h;h=0<g.Z.length?g.Z.pop():new y(g.Ga,g.Ca,g.Ba);a.ra=!0;h.ma("start",[b,c],{isReturnPromise:!0}).then(function(b){a.qa=!0;a.va=b;for(var g=a.B,h=g.aa();null!=h;){var f=g.ba(h),h=g.L(h);f.Fa(b,c)}})["catch"](function(a){console.log("Error in DependencyWorkers' worker: "+a)}).then(function(){g.Z.push(h);if(a.da){var b=a.ea;a.da=!1;a.ea=null;g.ka(a,b)}})};a.i(F,"DependencyWorkers");return c}
var G=F();function I(){asyncProxyScriptBlob.i(I,"ExportAsyncProxySymbols");asyncProxyScriptBlob.m("ExportAsyncProxySymbols(SubWorkerEmulationForChrome, AsyncProxySlaveSingleton, AsyncProxyMaster, ScriptsToImportPool, DependencyWorkers);");asyncProxyScriptBlob.m("self['AsyncProxy']['AsyncProxySlaveSingleton'] = AsyncProxySlaveSingleton;");asyncProxyScriptBlob.m("self['AsyncProxy']['AsyncProxyMaster'] = AsyncProxyMaster;");asyncProxyScriptBlob.m("self['AsyncProxy']['ScriptsToImportPool'] = ScriptsToImportPool;");
asyncProxyScriptBlob.m("self['AsyncProxy']['DependencyWorkers'] = DependencyWorkers;");return function(c,a,d,b,e){self.AsyncProxy=self.AsyncProxy||{};c.prototype.postMessage=c.prototype.postMessage;c.prototype.terminate=c.prototype.terminate;a.setSlaveSideCreator=a.Za;a.setBeforeOperationListener=a.Ya;a.sendUserDataToMaster=a.Xa;a.wrapPromiseFromSlaveSide=a.za;a.wrapCallbackFromSlaveSide=a.ya;d.prototype.setUserDataHandler=d.prototype.$a;d.prototype.terminate=d.prototype.terminate;d.prototype.callFunction=
d.prototype.ma;d.prototype.wrapCallback=d.prototype.eb;d.prototype.freeCallback=d.prototype.oa;d.getEntryUrl=d.pa;b.prototype.addScriptFromErrorWithStackTrace=b.prototype.La;b.prototype.getScriptsForWorkerImport=b.prototype.Pa;e.prototype.startTask=e.prototype.xa}}I()(w,B,y,A,G);self.AsyncProxy.AsyncProxySlaveSingleton=B;self.AsyncProxy.AsyncProxyMaster=y;self.AsyncProxy.ScriptsToImportPool=A;self.AsyncProxy.DependencyWorkers=G;
