!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.asyncProxy=e()}}(function(){return function e(t,r,n){function s(i,o){if(!r[i]){if(!t[i]){var l="function"==typeof require&&require;if(!o&&l)return l(i,!0);if(a)return a(i,!0);var p=new Error("Cannot find module '"+i+"'");throw p.code="MODULE_NOT_FOUND",p}var c=r[i]={exports:{}};t[i][0].call(c.exports,function(e){var r=t[i][1][e];return s(r?r:e)},c,c.exports,e,t,r,n)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)s(n[i]);return s}({1:[function(e,t,r){"use strict";var n=e("sub-worker-emulation-for-chrome"),s=e("async-proxy-factory"),a=e("async-proxy-slave"),i=e("async-proxy-master"),o=e("scripts-to-Import-Pool"),l=e("dependency-workers"),p=e("dependency-workers-task-handle"),c=e("dependency-workers-task"),u=e("wrapper-input-retreiver-base"),d=e("scheduler-task"),h=e("scheduler-wrapper-input-retreiver"),y=e("scheduler-dependency-workers");t.exports.SubWorkerEmulationForChrome=n,t.exports.AsyncProxyFactory=s,t.exports.AsyncProxySlave=a,t.exports.AsyncProxyMaster=i,t.exports.ScriptsToImportPool=o,t.exports.DependencyWorkers=l,t.exports.DependencyWorkersTaskHandle=p,t.exports.DependencyWorkersTask=c,t.exports.WrapperInputRetreiverBase=u,t.exports.SchedulerTask=d,t.exports.SchedulerWrapperInputRetreiver=h,t.exports.SchedulerDependencyWorkers=y},{"async-proxy-factory":2,"async-proxy-master":3,"async-proxy-slave":4,"dependency-workers":8,"dependency-workers-task":7,"dependency-workers-task-handle":6,"scheduler-dependency-workers":12,"scheduler-task":13,"scheduler-wrapper-input-retreiver":14,"scripts-to-Import-Pool":16,"sub-worker-emulation-for-chrome":18,"wrapper-input-retreiver-base":15}],2:[function(e,t,r){"use strict";var n=e("async-proxy-master"),s=function(){function e(e,t,r){if("function"==typeof r)return void(e.prototype[t]=r);r[0]||{};e.prototype[t]=function(){for(var e=this._getWorkerHelper(),n=[],s=0;s<arguments.length;++s){var a=r[s+1],i=arguments[s];if("callback"===a)n[s]=e.wrapCallback(i);else{if(a)throw"AsyncProxyFactory error: Unrecognized argument description "+a+" in argument "+(s+1)+" of method "+t;n[s]=i}}return e.callFunction(t,n,r[0])}}function t(e){for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var r={};return r.create=function(r,s,a,i){if(!r||!r.length)throw"AsyncProxyFactory error: missing scriptsToImport (2nd argument)";if(!a)throw"AsyncProxyFactory error: missing methods (3rd argument)";var o=i||function(){this.__workerHelperCtorArgs=t(arguments)};o.prototype._getWorkerHelper=function(){return this.__workerHelper||(this.__workerHelper=new n(r,s,this.__workerHelperCtorArgs||[])),this.__workerHelper};for(var l in a)e(o,l,a[l]||[]);return o},r}();t.exports=s},{"async-proxy-master":3}],3:[function(e,t,r){"use strict";var n=e("scripts-to-import-pool"),s=function(){function e(n,a,i,o){function l(e){s(c,e)}var c=this;o=o||{},c._callbacks=[],c._pendingPromiseCalls=[],c._subWorkerById=[],c._subWorkers=[],c._userDataHandler=null,c._notReturnedFunctions=0,c._functionsBufferSize=o.functionsBufferSize||5,c._pendingMessages=[];var u=t(),d=r.toString();d=d.replace("SCRIPT_PLACEHOLDER",u);var h=new Blob(["(",d,")()"],{type:"application/javascript"}),y=URL.createObjectURL(h);c._worker=new Worker(y),c._worker.onmessage=l,c._worker.postMessage({functionToCall:"ctor",scriptsToImport:n,ctorName:a,args:i,callId:++p,isPromise:!1,masterEntryUrl:e.getEntryUrl()})}function t(){var e=new Error;return n._getScriptName(e)}function r(){importScripts("SCRIPT_PLACEHOLDER"),asyncProxy.AsyncProxySlave._initializeSlave()}function s(e,t){var r=t.data.callId;switch(t.data.type){case"functionCalled":--e._notReturnedFunctions,o(e);break;case"promiseResult":var n=e._pendingPromiseCalls[r];delete e._pendingPromiseCalls[r];var s=t.data.result;n.resolve(s);break;case"promiseFailure":var i=e._pendingPromiseCalls[r];delete e._pendingPromiseCalls[r];var l=t.data.reason;i.reject(l);break;case"userData":null!==e._userDataHandler&&e._userDataHandler(t.data.userData);break;case"callback":var p=e._callbacks[t.data.callId];if(void 0===p)throw"Unexpected message from SlaveWorker of callback ID: "+t.data.callId+". Maybe should indicate isMultipleTimesCallback = true on creation?";p.isMultipleTimeCallback||e.freeCallback(e._callbacks[t.data.callId]),null!==p.callback&&p.callback.apply(null,t.data.args);break;case"subWorkerCtor":var c=new Worker(t.data.scriptUrl),u=t.data.subWorkerId;e._subWorkerById[u]=c,e._subWorkers.push(c),c.onmessage=function(t){a(e,t.ports,!1,{functionToCall:"subWorkerOnMessage",subWorkerId:u,data:t.data})};break;case"subWorkerPostMessage":var d=e._subWorkerById[t.data.subWorkerId];d.postMessage(t.data.data);break;case"subWorkerTerminate":var h=e._subWorkerById[t.data.subWorkerId];h.terminate();break;default:throw"Unknown message from AsyncProxySlave of type: "+t.data.type}}function a(e,t,r,n){return e._notReturnedFunctions>=e._functionsBufferSize?void e._pendingMessages.push({transferables:t,isFunctionCall:r,message:n}):void i(e,t,r,n)}function i(e,t,r,n){r&&++e._notReturnedFunctions,e._worker.postMessage(n,t)}function o(e){for(;e._notReturnedFunctions<e._functionsBufferSize&&e._pendingMessages.length>0;){var t=e._pendingMessages.shift();i(e,t.transferables,t.isFunctionCall,t.message)}}function l(){var e=location.href,t=e.lastIndexOf("/");return t>=0&&(e=e.substring(0,t)),e}var p=0,c=!1,u=l();return e.prototype.setUserDataHandler=function(e){this._userDataHandler=e},e.prototype.terminate=function(){this._worker.terminate();for(var e=0;e<this._subWorkers.length;++e)this._subWorkers[e].terminate()},e.prototype.callFunction=function(t,r,n){n=n||{};var s=!!n.isReturnPromise,o=n.transferables||[],l=n.pathsToTransferablesInPromiseResult,c=++p,u=null,d=this;s&&(u=new Promise(function(e,t){d._pendingPromiseCalls[c]={resolve:e,reject:t}}));var h,y=n.isSendImmediately?i:a;if(h="function"==typeof o?o():e._extractTransferables(o,r),y(this,h,!0,{functionToCall:t,args:r||[],callId:c,isPromise:s,pathsToTransferablesInPromiseResult:l}),s)return u},e.prototype.wrapCallback=function(e,t,r){r=r||{};var n=++p,s={isWorkerHelperCallback:!0,isMultipleTimeCallback:!!r.isMultipleTimeCallback,callId:n,callbackName:t,pathsToTransferables:r.pathsToTransferables},a={isMultipleTimeCallback:!!r.isMultipleTimeCallback,callId:n,callback:e,pathsToTransferables:r.pathsToTransferables};return this._callbacks[n]=a,s},e.prototype.freeCallback=function(e){delete this._callbacks[e.callId]},e.getEntryUrl=function(){return c=!0,u},e._setEntryUrl=function(e){if(u!==e&&c)throw"Previous values returned from getMasterEntryUrl is wrong. Avoid calling it within the slave c`tor";u=e},e._extractTransferables=function(e,t){if(void 0!==e){for(var r=new Array(e.length),n=0;n<e.length;++n){for(var s=e[n],a=t,i=0;i<s.length;++i){var o=s[i];a=a[o]}r[n]=a}return r}},e}();t.exports=s},{"scripts-to-import-pool":17}],4:[function(e,t,r){"use strict";var n=e("async-proxy-master"),s=e("sub-worker-emulation-for-chrome"),a=function(){function e(e){var t=e.data.functionToCall,r=e.data.args,s=e.data.callId,l=e.data.isPromise,u=e.data.pathsToTransferablesInPromiseResult,d=null;switch(t){case"ctor":n._setEntryUrl(e.data.masterEntryUrl);var h=e.data.scriptsToImport;i=e.data.ctorName;for(var y=0;y<h.length;++y)importScripts(h[y]);return void(a=p.apply(null,r));case"subWorkerOnMessage":var _=c[e.data.subWorkerId],f={data:e.data.data};return void _.onmessage(f)}r=new Array(e.data.args.length);for(var k=0;k<e.data.args.length;++k){var g=e.data.args[k];void 0!==g&&null!==g&&g.isWorkerHelperCallback&&(g=o.wrapCallbackFromSlaveSide(g)),r[k]=g}for(var v,m=a;m&&!(v=a[t]);)m=m.__proto__;if(!v)throw"AsyncProxy error: could not find function "+t;var T=v.apply(a,r);l&&o.wrapPromiseFromSlaveSide(s,T,u),self.postMessage({type:"functionCalled",callId:e.data.callId,result:d})}function t(){var e;try{for(var t=i.split("."),n=self,s=0;s<t.length;++s)n=n[t[s]];var a=n,o=[null].concat(r(arguments));e=new(Function.prototype.bind.apply(a,o))}catch(l){throw new Error("Failed locating class name "+i+": "+l)}return e}function r(e){for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var a,i,o={},l=null,p=t,c={};return o._initializeSlave=function(){self.onmessage=e},o.setSlaveSideCreator=function(e){p=e},o.setBeforeOperationListener=function(e){l=e},o.sendUserDataToMaster=function(e){self.postMessage({type:"userData",userData:e})},o.wrapPromiseFromSlaveSide=function(e,t,r){var s=t.then(function(t){var s=n._extractTransferables(r,t);self.postMessage({type:"promiseResult",callId:e,result:t},s)});s["catch"](function(t){self.postMessage({type:"promiseFailure",callId:e,reason:t})})},o.wrapCallbackFromSlaveSide=function(e){function t(){if(s)throw"Callback is called twice but isMultipleTimeCallback = false";var t=r(arguments);if(null!==l)try{l.call(a,"callback",e.callbackName,t)}catch(i){console.log("AsyncProxySlave.beforeOperationListener has thrown an exception: "+i)}var o=n._extractTransferables(e.pathsToTransferables,t);self.postMessage({type:"callback",callId:e.callId,args:t},o),e.isMultipleTimeCallback||(s=!0)}var s=!1;return t},void 0===self.Worker&&(s.initialize(c),self.Worker=s),o}();t.exports=a},{"async-proxy-master":3,"sub-worker-emulation-for-chrome":18}],5:[function(e,t,r){"use strict";var n=e("linked-list"),s=e("js-builtin-hash-map"),a=e("dependency-workers-task"),i=function(){function e(){this.isTerminated=!1,this.priority=0,this.lastProcessedData=null,this.taskApi=null,this.hasProcessedData=!1,this.waitingForWorkerResult=!1,this.isPendingDataForWorker=!1,this.pendingDataForWorker=null,this.pendingWorkerType=0,this.taskHandles=new n,this.taskKey=null,this._isActualTerminationPending=!1,this._dependsTasksTerminatedCount=0,this._parentDependencyWorkers=null,this._workerInputRetreiver=null,this._parentList=null,this._parentIterator=null,this._dependsTaskHandles=null,this._dependTaskKeys=[],this._dependTaskResults=[],this._hasDependTaskData=[],this._pendingDelayedAction=!1,this._pendingDelayedDependencyData=[],this._pendingDelayedEnded=!1,this._pendingDelayedNewData=!1,this._performPendingDelayedActionsBound=this._performPendingDelayedActions.bind(this)}return e.prototype.initialize=function(e,t,r,n,i){this.taskKey=e,this._parentDependencyWorkers=t,this._workerInputRetreiver=r,this._parentList=n,this._parentIterator=i,this._dependsTaskHandles=new s,this.taskApi=new a(this,e)},e.prototype.ended=function(){this._parentList.remove(this._parentIterator),this._parentIterator=null;for(var e=this._dependsTaskHandles.getFirstIterator();null!==e;){var t=this._dependsTaskHandles.getFromIterator(e).taskHandle;e=this._dependsTaskHandles.getNextIterator(e),t.unregister()}this._dependsTaskHandles.clear(),this._pendingDelayedEnded=!0,this._pendingDelayedAction||(this._pendingDelayedAction=!0,setTimeout(this._performPendingDelayedActionsBound))},e.prototype.setPriorityAndNotify=function(e){if(this.priority!==e){this.priority=e,this.statusUpdate();for(var t=this._dependsTaskHandles.getFirstIterator();null!==t;){var r=this._dependsTaskHandles.getFromIterator(t).taskHandle;t=this._dependsTaskHandles.getNextIterator(t),r.setPriority(e)}}},e.prototype.statusUpdate=function(){var e={priority:this.priority,hasListeners:this.taskHandles.getCount()>0,isWaitingForWorkerResult:this.waitingForWorkerResult,terminatedDependsTasks:this._dependsTasksTerminatedCount,dependsTasks:this._dependsTaskHandles.getCount()};this.taskApi._onEvent("statusUpdated",e),this._isActualTerminationPending&&!this.waitingForWorkerResult&&(this._isActualTerminationPending=!1,this.ended())},e.prototype.recalculatePriority=function(){for(var e=this.taskHandles,t=e.getFirstIterator(),r=!0,n=0;null!==t;){var s=e.getFromIterator(t);(r||s._localPriority>n)&&(n=s._localPriority),t=e.getNextIterator(t)}return n},e.prototype.newData=function(e){this.hasProcessedData=!0,this.lastProcessedData=e,this._pendingDelayedNewData=!0,this._pendingDelayedAction||(this._pendingDelayedAction=!0,setTimeout(this._performPendingDelayedActionsBound))},e.prototype.dataReady=function(e,t){if(this.isTerminated)throw"AsyncProxy.DependencyWorkers: already terminated";this.waitingForWorkerResult?(this.pendingDataForWorker=e,this.isPendingDataForWorker=!0,this.pendingWorkerType=t):this._parentDependencyWorkers._dataReady(this,e,t)},e.prototype.terminate=function(){if(this.isTerminated)throw"AsyncProxy.DependencyWorkers: already terminated";this.isTerminated=!0,this.waitingForWorkerResult?this._isActualTerminationPending=!0:this.ended()},Object.defineProperty(e.prototype,"dependTaskKeys",{get:function(){return this._dependTaskKeys}}),Object.defineProperty(e.prototype,"dependTaskResults",{get:function(){return this._dependTaskResults}}),e.prototype.registerTaskDependency=function(e){function t(t){a._dependTaskResults[l]=t,a._hasDependTaskData[l]=!0,a.taskApi._onEvent("dependencyTaskData",t,e),i=!0}function r(){if(o)throw"AsyncProxy.DependencyWorkers: Double termination";o=!0,a._dependsTaskTerminated()}var n=this._workerInputRetreiver.getKeyAsString(e),s=this._dependsTaskHandles.tryAdd(n,function(){return{taskHandle:null}});if(!s.isNew)throw"AsyncProxy.DependencyWorkers: Cannot add task dependency twice";var a=this,i=!1,o=!1,l=this._dependTaskKeys.length;this._dependTaskKeys[l]=e,s.value.taskHandle=this._parentDependencyWorkers.startTask(e,{onData:t,onTerminated:r}),!i&&s.value.taskHandle.hasData()&&(this._pendingDelayedDependencyData.push({data:s.value.taskHandle.getLastData(),onDependencyTaskData:t}),this._pendingDelayedAction||(this._pendingDelayedAction=!0,setTimeout(this._performPendingDelayedActionsBound)))},e.prototype._dependsTaskTerminated=function(){++this._dependsTasksTerminatedCount,this._dependsTasksTerminatedCount===this._dependsTaskHandles.getCount()&&this.taskApi._onEvent("allDependTasksTerminated"),this.statusUpdate()},e.prototype._performPendingDelayedActions=function(){var e,t;if(this._pendingDelayedAction=!1,this._pendingDelayedDependencyData.length>0){var r=this._pendingDelayedDependencyData;this._pendingDelayedDependencyData=[];for(var n=0;n<r.length;++n)r[n].onDependencyTaskData(r[n].data)}if(this._pendingDelayedNewData){var s=this.taskHandles;for(e=s.getFirstIterator();null!==e;)t=s.getFromIterator(e),e=s.getNextIterator(e),t._callbacks.onData(this.lastProcessedData,this.taskKey)}if(this._pendingDelayedEnded){for(e=this.taskHandles.getFirstIterator();null!==e;)t=this.taskHandles.getFromIterator(e),e=this.taskHandles.getNextIterator(e),t._callbacks.onTerminated&&t._callbacks.onTerminated();this.taskHandles.clear()}},e}();t.exports=i},{"dependency-workers-task":7,"js-builtin-hash-map":10,"linked-list":11}],6:[function(e,t,r){"use strict";var n=function(){function e(e,t){this._internalContext=e,this._localPriority=0,this._callbacks=t,this._taskHandlesIterator=e.taskHandles.add(this)}return e.prototype.hasData=function(){return this._internalContext.hasProcessedData},e.prototype.getLastData=function(){return this._internalContext.lastProcessedData},e.prototype.setPriority=function(e){if(!this._taskHandlesIterator)throw"AsyncProxy.DependencyWorkers: Already unregistered";var t;t=e>this._internalContext.priority?e:this._localPriority<this._internalContext.priority?this._internalContext.priority:this._internalContext.recalculatePriority(),this._internalContext.setPriorityAndNotify(t)},e.prototype.unregister=function(){if(!this._taskHandlesIterator)throw"AsyncProxy.DependencyWorkers: Already unregistered";if(this._internalContext.taskHandles.remove(this._taskHandlesIterator),this._taskHandlesIterator=null,0===this._internalContext.taskHandles.getCount())this._internalContext.isTerminated||this._internalContext.statusUpdate();else if(this._localPriority===this._internalContext.priority){var e=this._internalContext.recalculatePriority();this._internalContext.setPriorityAndNotify(e)}},e}();t.exports=n},{}],7:[function(e,t,r){"use strict";var n=function(){function e(e,t,r){if(this._wrapped=e,this._key=t,this._eventListeners={dependencyTaskData:[],statusUpdated:[],allDependTasksTerminated:[]},r)for(var n in this._eventListeners)this._registerWrappedEvent(n)}return e.prototype.dataReady=function(e,t){this._wrapped.dataReady(e,t)},e.prototype.terminate=function(){this._wrapped.terminate()},e.prototype.registerTaskDependency=function(e){return this._wrapped.registerTaskDependency(e)},e.prototype.on=function(e,t){if(!this._eventListeners[e])throw"AsyncProxy.DependencyWorkers: Task has no event "+e;this._eventListeners[e].push(t)},Object.defineProperty(e.prototype,"key",{get:function(){return this._key}}),Object.defineProperty(e.prototype,"dependTaskKeys",{get:function(){return this._wrapped.dependTaskKeys}}),Object.defineProperty(e.prototype,"dependTaskResults",{get:function(){return this._wrapped.dependTaskResults}}),e.prototype._onEvent=function(e,t,r){"statusUpdated"==e&&(t=this._modifyStatus(t));for(var n=this._eventListeners[e],s=0;s<n.length;++s)n[s].call(this,t,r)},e.prototype._modifyStatus=function(e){return e},e.prototype._registerWrappedEvent=function(e){var t=this;this._wrapped.on(e,function(r,n){t._onEvent(e,r,n)})},e}();t.exports=n},{}],8:[function(e,t,r){"use strict";var n=e("js-builtin-hash-map"),s=e("dependency-workers-internal-context"),a=e("dependency-workers-task-handle"),i=e("async-proxy-master"),o=function(){function e(e){var t=this;if(t._workerInputRetreiver=e,t._internalContexts=new n,t._workerPoolByTaskType=[],t._taskOptionsByTaskType=[],!e.getWorkerTypeOptions)throw"AsyncProxy.DependencyWorkers: No workerInputRetreiver.getWorkerTypeOptions() method";if(!e.getKeyAsString)throw"AsyncProxy.DependencyWorkers: No workerInputRetreiver.getKeyAsString() method"}return e.prototype.startTask=function(e,t){var r=this._workerInputRetreiver.getKeyAsString(e),n=this._internalContexts.tryAdd(r,function(){return new s}),i=n.value,o=new a(i,t);return n.isNew&&(i.initialize(e,this,this._workerInputRetreiver,this._internalContexts,n.iterator,this._workerInputRetreiver),this._workerInputRetreiver.taskStarted(i.taskApi)),o},e.prototype.startTaskPromise=function(e){var t=this;return new Promise(function(r,n){function s(e){l=!0,i=e}function a(){l?r(i):n("AsyncProxy.DependencyWorkers: Internal error - task terminated but no data returned")}var i,o=t.startTask(e,{onData:s,onTerminated:a}),l=o.hasData();l&&(i=o.getLastData())})},e.prototype._dataReady=function(e,t,r){var n,s=this,a=s._workerPoolByTaskType[r];if(a||(a=[],s._workerPoolByTaskType[r]=a),a.length>0)n=a.pop();else{var o=s._workerInputRetreiver.getWorkerTypeOptions(r);if(!o)return e.newData(t),void e.statusUpdate();n=new i(o.scriptsToImport,o.ctorName,o.ctorArgs)}e.waitingForWorkerResult||(e.waitingForWorkerResult=!0,e.statusUpdate()),n.callFunction("start",[t,e.taskKey],{isReturnPromise:!0}).then(function(t){return e.newData(t),t})["catch"](function(e){return console.log("Error in DependencyWorkers' worker: "+e),e}).then(function(t){a.push(n),s._checkIfPendingData(e)||(e.waitingForWorkerResult=!1,e.statusUpdate())})},e.prototype._checkIfPendingData=function(e){if(!e.isPendingDataForWorker)return!1;var t=e.pendingDataForWorker;return e.isPendingDataForWorker=!1,e.pendingDataForWorker=null,this._dataReady(e,t,e.pendingWorkerType),!0},e}();t.exports=o},{"async-proxy-master":3,"dependency-workers-internal-context":5,"dependency-workers-task-handle":6,"js-builtin-hash-map":10}],9:[function(e,t,r){"use strict";var n=e("linked-list"),s=function(){function e(e){var t=this;t._hasher=e,t.clear()}return e.prototype.clear=function(){this._listByKey=[],this._listOfLists=new n,this._count=0},e.prototype.getFromKey=function(e){var t=this._hasher.getHashCode(e),r=this._listByKey[t];if(!r)return null;for(var n=r.list,s=n.getFirstIterator();null!==s;){var a=n.getFromIterator(s);if(this._hasher.isEqual(a.key,e))return a.value;s=n.getNextIterator(s)}return null},e.prototype.getFromIterator=function(e){return e._hashElements.list.getFromIterator(e._internalIterator).value},e.prototype.tryAdd=function(e,t){var r=this._hasher.getHashCode(e),s=this._listByKey[r];s||(s={hashCode:r,list:new n,listOfListsIterator:null},s.listOfListsIterator=this._listOfLists.add(s),this._listByKey[r]=s);var a={_hashElements:s,_internalIterator:null};for(a._internalIterator=s.list.getFirstIterator();null!==a._internalIterator;){var i=s.list.getFromIterator(a._internalIterator);if(this._hasher.isEqual(i.key,e))return{iterator:a,isNew:!1,value:i.value};a._internalIterator=s.list.getNextIterator(a._internalIterator)}var o=t();return a._internalIterator=s.list.add({key:e,value:o}),++this._count,{iterator:a,isNew:!0,value:o}},e.prototype.remove=function(e){var t=e._hashElements.list.getCount();e._hashElements.list.remove(e._internalIterator);var r=e._hashElements.list.getCount();this._count+=r-t,0===r&&(this._listOfLists.remove(e._hashElements.listOfListsIterator),delete this._listByKey[e._hashElements.hashCode])},e.prototype.getCount=function(){return this._count},e.prototype.getFirstIterator=function(){var e=this._listOfLists.getFirstIterator(),t=null,r=null;return null!==e&&(t=this._listOfLists.getFromIterator(e),r=t.list.getFirstIterator()),null===r?null:{_hashElements:t,_internalIterator:r}},e.prototype.getNextIterator=function(e){for(var t={_hashElements:e._hashElements,_internalIterator:e._hashElements.list.getNextIterator(e._internalIterator)};null===t._internalIterator;){var r=this._listOfLists.getNextIterator(e._hashElements.listOfListsIterator);if(null===r)return null;t._hashElements=this._listOfLists.getFromIterator(r),t._internalIterator=t._hashElements.list.getFirstIterator()}return t},e}();t.exports=s},{"linked-list":11}],10:[function(e,t,r){"use strict";var n=e("hash-map"),s=function(){function e(){n.call(this,t)}var t={getHashCode:function(e){return e},isEqual:function(e,t){return e===t}};return e.prototype=Object.create(n.prototype),e}();t.exports=s},{"hash-map":9}],11:[function(e,t,r){"use strict";var n=function(){function e(){this.clear()}return e.prototype.clear=function(){this._first={_prev:null,_parent:this},this._last={_next:null,_parent:this},this._count=0,this._last._prev=this._first,this._first._next=this._last},e.prototype.add=function(e,t){null!==t&&void 0!==t||(t=this._last),this._validateIteratorOfThis(t),++this._count;var r={_value:e,_next:t,_prev:t._prev,_parent:this};return r._prev._next=r,t._prev=r,r},e.prototype.remove=function(e){this._validateIteratorOfThis(e),--this._count,e._prev._next=e._next,e._next._prev=e._prev,e._parent=null},e.prototype.getFromIterator=function(e){return this._validateIteratorOfThis(e),e._value},e.prototype.getFirstIterator=function(){var e=this.getNextIterator(this._first);return e},e.prototype.getLastIterator=function(){var e=this.getPrevIterator(this._last);return e},e.prototype.getNextIterator=function(e){return this._validateIteratorOfThis(e),e._next===this._last?null:e._next},e.prototype.getPrevIterator=function(e){return this._validateIteratorOfThis(e),e._prev===this._first?null:e._prev},e.prototype.getCount=function(){return this._count},e.prototype._validateIteratorOfThis=function(e){if(e._parent!==this)throw"iterator must be of the current LinkedList"},e}();t.exports=n},{}],12:[function(e,t,r){"use strict";var n=e("scheduler-wrapper-input-retreiver"),s=e("dependency-workers"),a=function(){function e(e,t){var r=new n(e,t);s.call(this,r)}return e.prototype=Object.create(s.prototype),e}();t.exports=a},{"dependency-workers":8,"scheduler-wrapper-input-retreiver":14}],13:[function(e,t,r){"use strict";var n=e("dependency-workers-task"),s=function(){function e(e,t,r,s){var a=this;n.call(this,s,s.key,!0),a._scheduler=e,a._inputRetreiver=t,a._isDisableWorkerCache=r,a._wrappedTask=s,a._onScheduledBound=a._onScheduled.bind(a),a._pendingDataToProcess=null,a._hasPendingDataToProcess=!1,a._cancelPendingDataToProcess=!1,a._isWorkerActive=!1,a._isTerminated=!1,a._lastStatus={isWaitingForWorkerResult:!1}}return e.prototype=Object.create(n.prototype),e.prototype._modifyStatus=function(e){return this._lastStatus=JSON.parse(JSON.stringify(e)),this._checkIfJobDone(e),this._lastStatus.isWaitingForWorkerResult=e.isWaitingForWorkerResult||this._hasPendingDataToProcess,this._lastStatus},e.prototype.dataReady=function(e,t){if(this._isTerminated)throw"AsyncProxy.DependencyWorkers: Data after termination";if(void 0===this._isDisableWorkerCache[t]&&(this._isDisableWorkerCache[t]=null===this._inputRetreiver.getWorkerTypeOptions(t)),this._isDisableWorkerCache[t]){this._pendingDataToProcess=null,this._cancelPendingDataToProcess=this._hasPendingDataToProcess&&!this._isWorkerActive,this._hasPendingDataToProcess=!1,n.prototype.dataReady.call(this,e,t);var r=this._lastStatus.isWaitingForWorkerResult&&!this._hasPendingDataToProcess;return void(r&&(this._lastStatus.isWaitingForWorkerResult=!1,this._onEvent("statusUpdated",this._lastStatus)))}this._pendingDataToProcess=e,this._cancelPendingDataToProcess=!1;var s=this._hasPendingDataToProcess;this._hasPendingDataToProcess=!0,s||this._isWorkerActive||this._scheduler.enqueueJob(this._onScheduledBound,this)},e.prototype.terminate=function(){if(this._isTerminated)throw"AsyncProxy.DependencyWorkers: Double termination";this._isTerminated=!0,this._hasPendingDataToProcess||n.prototype.terminate.call(this)},e.prototype._onScheduled=function(e,t,r){if(t!==this)throw"AsyncProxy.DependencyWorkers: Unexpected context";if(this._cancelPendingDataToProcess)this._cancelPendingDataToProcess=!1,r.jobDone();else{if(!this._hasPendingDataToProcess)throw"AsyncProxy.DependencyWorkers: !enqueuedProcessJob";this._isWorkerActive=!0,this._hasPendingDataToProcess=!1,this._jobCallbacks=r;var s=this._pendingDataToProcess;this._pendingDataToProcess=null,n.prototype.dataReady.call(this,s)}this._isTerminated&&n.prototype.terminate.call(this)},e.prototype._checkIfJobDone=function(e){if(this._isWorkerActive&&!e.isWaitingForWorkerResult){if(this._cancelPendingDataToProcess)throw"AsyncProxy.DependencyWorkers: cancelPendingDataToProcess";this._isWorkerActive=!1,this._hasPendingDataToProcess&&this._scheduler.enqueueJob(this._onScheduledBound,this),this._jobCallbacks.jobDone()}},e}();t.exports=s},{"dependency-workers-task":7}],14:[function(e,t,r){"use strict";var n=e("scheduler-task"),s=e("wrapper-input-retreiver-base"),a=function(){function e(e,t){s.call(this,t);var r=this;if(r._scheduler=e,r._inputRetreiver=t,r._isDisableWorkerCache={},!t.taskStarted)throw"AsyncProxy.DependencyWorkers: No inputRetreiver.taskStarted() method"}return e.prototype=Object.create(s.prototype),e.prototype.taskStarted=function(e){var t=new n(this._scheduler,this._inputRetreiver,this._isDisableWorkerCache,e);return this._inputRetreiver.taskStarted(t)},e}();t.exports=a},{"scheduler-task":13,"wrapper-input-retreiver-base":15}],15:[function(e,t,r){"use strict";var n=function(){function e(e){if(!e.getKeyAsString)throw"AsyncProxy.DependencyWorkers: No inputRetreiver.getKeyAsString() method";if(!e.getWorkerTypeOptions)throw"AsyncProxy.DependencyWorkers: No inputRetreiver.getTaskTypeOptions() method";var t=this;t._inputRetreiver=e}return e.prototype.taskStarted=function(e){throw"AsyncProxy.WrapperInputRetreiverBase internal error: Not implemented taskStarted()"},e.prototype.getKeyAsString=function(e){return this._inputRetreiver.getKeyAsString(e)},e.prototype.getWorkerTypeOptions=function(e){return this._inputRetreiver.getWorkerTypeOptions(e)},e}();t.exports=n},{}],16:[function(e,t,r){"use strict";var n=function(){function e(){var e=this;e._scriptsByName={},e._scriptsArray=null}return e.prototype.addScriptFromErrorWithStackTrace=function(t){var r=e._getScriptName(t);this._scriptsByName[r]||(this._scriptsByName[r]=!0,this._scriptsArray=null)},e.prototype.getScriptsForWorkerImport=function(){if(null===this._scriptsArray){this._scriptsArray=[];for(var e in this._scriptsByName)this._scriptsArray.push(e)}return this._scriptsArray},e._getScriptName=function(e){var t=e.stack.trim(),r=/at (|[^ ]+ \()([^ ]+):\d+:\d+/,n=r.exec(t);if(n&&""!==n[2])return n[2];var s=new RegExp(/.+\/(.*?):\d+(:\d+)*$/);if(n=s.exec(t),n&&""!==n[1])return n[1];if(void 0!==e.fileName)return e.fileName;throw"ImageDecoderFramework.js: Could not get current script URL"},e}();t.exports=n},{}],17:[function(e,t,r){arguments[4][16][0].apply(r,arguments)},{dup:16}],18:[function(e,t,r){"use strict";var n=function(){function e(e){if(null===r)throw"AsyncProxy internal error: SubWorkerEmulationForChrome not initialized";var n=this;n._subWorkerId=++t,r[n._subWorkerId]=n,self.postMessage({type:"subWorkerCtor",subWorkerId:n._subWorkerId,scriptUrl:e})}var t=0,r=null;return e.initialize=function(e){r=e},e.prototype.postMessage=function(e,t){self.postMessage({type:"subWorkerPostMessage",subWorkerId:this._subWorkerId,data:e},t)},e.prototype.terminate=function(e,t){self.postMessage({type:"subWorkerTerminate",subWorkerId:this._subWorkerId},t)},e}();t.exports=n},{}]},{},[1])(1)});