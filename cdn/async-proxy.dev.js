var u=t();self.asyncProxyScriptBlob=new u;
function t(){function b(){this.c=["'use strict';"];this.O=this.u=null;this.i(t,"BlobScriptGenerator");this.m("var asyncProxyScriptBlob = new BlobScriptGenerator();")}b.prototype.i=function(a,c){if(this.u)throw Error("Cannot add member to AsyncProxyScriptBlob after blob was used");c&&(this.c.push("var "),this.c.push(c),this.c.push(" = "));this.c.push("(");this.c.push(a.toString());this.c.push(")();")};b.prototype.m=function(a){if(this.u)throw Error("Cannot add statement to AsyncProxyScriptBlob after blob was used");this.c.push(a)};
b.prototype.getBlob=function(){this.u||(this.u=new Blob(this.c,{type:"application/javascript"}));return this.u};b.prototype.Oa=function(){this.O||(this.O=URL.createObjectURL(this.getBlob()));return this.O};return b};function v(){function b(d){if(null===c)throw"AsyncProxy internal error: SubWorkerEmulationForChrome not initialized";this.J=++a;c[this.J]=this;self.postMessage({type:"subWorkerCtor",l:this.J,Va:d})}var a=0,c=null;b.Qa=function(d){c=d};b.prototype.postMessage=function(d,a){self.postMessage({type:"subWorkerPostMessage",l:this.J,data:d},a)};b.prototype.terminate=function(a,c){self.postMessage({type:"subWorkerTerminate",l:this.J},c)};self.asyncProxyScriptBlob.i(v,"SubWorkerEmulationForChrome");return b}
var w=v();function x(){function b(g,d,h,f){var e=this;f=f||{};var l=a.toString(),l=l.replace("SCRIPT_PLACEHOLDER",k.Oa()),l=URL.createObjectURL(new Blob(["(",l,")()"],{type:"application/javascript"}));e.C=[];e.v=[];e.V=[];e.W=[];e.L=new Worker(l);e.L.onmessage=function(g){c(e,g)};e.X=null;e.H=0;e.da=f.functionsBufferSize||5;e.T=[];e.L.postMessage({Z:"ctor",Wa:g,Na:d,j:h,b:++n,sa:!1,Ta:b.ma()})}function a(){importScripts("SCRIPT_PLACEHOLDER");AsyncProxy.AsyncProxySlave=self.AsyncProxy.AsyncProxySlaveSingleton;
AsyncProxy.AsyncProxySlave.Da()}function c(g,a){var h=a.data.b;switch(a.data.type){case "functionCalled":--g.H;e(g);break;case "promiseResult":var c=g.v[h];delete g.v[h];c.resolve(a.data.result);break;case "promiseFailure":c=g.v[h];delete g.v[h];c.reject(a.data.reason);break;case "userData":null!==g.X&&g.X(a.data.cb);break;case "callback":h=g.C[a.data.b];if(void 0===h)throw"Unexpected message from SlaveWorker of callback ID: "+a.data.b+". Maybe should indicate isMultipleTimesCallback = true on creation?";
h.aa||g.la(g.C[a.data.b]);null!==h.ka&&h.ka.apply(null,a.data.j);break;case "subWorkerCtor":var h=new Worker(a.data.Va),b=a.data.l;g.V[b]=h;g.W.push(h);h.onmessage=function(a){d(g,a.ports,!1,{Z:"subWorkerOnMessage",l:b,data:a.data})};break;case "subWorkerPostMessage":h=g.V[a.data.l];h.postMessage(a.data.data);break;case "subWorkerTerminate":h=g.V[a.data.l];h.terminate();break;default:throw"Unknown message from AsyncProxySlave of type: "+a.data.type;}}function d(g,a,d,c){g.H>=g.da?g.T.push({ab:a,Ra:d,
message:c}):f(g,a,d,c)}function f(g,a,d,c){d&&++g.H;g.L.postMessage(c,a)}function e(g){for(;g.H<g.da&&0<g.T.length;){var a=g.T.shift();f(g,a.ab,a.Ra,a.message)}}var k=self.asyncProxyScriptBlob,n=0,l=!1,p=function(){var g=location.href,a=g.lastIndexOf("/");0<=a&&(g=g.substring(0,a));return g}();b.prototype.$a=function(a){this.X=a};b.prototype.terminate=function(){this.L.terminate();for(var a=0;a<this.W.length;++a)this.W[a].terminate()};b.prototype.ja=function(a,c,h){h=h||{};var b=!!h.isReturnPromise,
e=h.transferables,l=h.pathsToTransferablesInPromiseResult,k=++n,p=null,r=this;b&&(p=new Promise(function(a,g){r.v[k]={resolve:a,reject:g}}));(h.isSendImmediately?f:d)(this,e,!0,{Z:a,j:c||[],b:k,sa:b,Ua:l});if(b)return p};b.prototype.eb=function(a,c,d){d=d||{};var b=++n;c={Sa:!0,aa:!!d.isMultipleTimeCallback,b:b,Ma:c,ua:d.pathsToTransferables};this.C[b]={aa:!!d.isMultipleTimeCallback,b:b,ka:a,ua:d.pathsToTransferables};return c};b.prototype.la=function(a){delete this.C[a.b]};b.ma=function(){l=!0;return p};
b.Ga=function(a){if(p!==a&&l)throw"Previous values returned from getMasterEntryUrl is wrong. Avoid calling it within the slave c`tor";p=a};k.i(x,"AsyncProxyMaster");return b}var y=x();function z(){function b(){var a;try{for(var c=l.split("."),b=self,e=0;e<c.length;++e)b=b[c[e]];var c=b,f=[null].concat(d(arguments));a=new (Function.prototype.bind.apply(c,f))}catch(k){throw Error("Failed locating class name "+l+": "+k);}return a}function a(a,c){if(void 0!==a){for(var d=Array(a.length),b=0;b<a.length;++b){for(var e=a[b],f=c,l=0;l<e.length;++l)f=f[e[l]];d[b]=f}return d}}function c(a){var c=a.data.Z,d=a.data.j,e=a.data.b,p=a.data.sa,H=a.data.Ua;switch(c){case "ctor":self.AsyncProxy.AsyncProxyMaster.Ga(a.data.Ta);
e=a.data.Wa;l=a.data.Na;for(var m=0;m<e.length;++m)importScripts(e[m]);k=b.apply(null,d);return;case "subWorkerOnMessage":n[a.data.l].onmessage({data:a.data.data});return}d=Array(a.data.j.length);for(m=0;m<a.data.j.length;++m){var q=a.data.j[m];void 0!==q&&null!==q&&q.Sa&&(q=f.xa(q));d[m]=q}for(var m=k,r;m&&!(r=k[c]);)m=m.__proto__;if(!r)throw"AsyncProxy error: could not find function "+r;d=r.apply(k,d);p&&f.ya(e,d,H);self.postMessage({type:"functionCalled",b:a.data.b,result:null})}function d(a){for(var d=
Array(a.length),c=0;c<a.length;++c)d[c]=a[c];return d}var f={},e=null,k,n={},l;f.Da=function(){self.onmessage=c};f.Za=function(a){b=a};f.Ya=function(a){e=a};f.Xa=function(a){self.postMessage({type:"userData",cb:a})};f.ya=function(d,c,b){c.then(function(c){var e=a(b,c);self.postMessage({type:"promiseResult",b:d,result:c},e)})["catch"](function(a){self.postMessage({type:"promiseFailure",b:d,reason:a})})};f.xa=function(c){var b=!1;return function(){if(b)throw"Callback is called twice but isMultipleTimeCallback = false";
var f=d(arguments);if(null!==e)try{e.call(k,"callback",c.Ma,f)}catch(l){console.log("AsyncProxySlave.beforeOperationListener has thrown an exception: "+l)}var n=a(c.ua,f);self.postMessage({type:"callback",b:c.b,j:f},n);c.aa||(b=!0)}};f.S=function(){return A.S(Error())};if(void 0===self.Worker){var p=self.SubWorkerEmulationForChrome;p.Qa(n);self.Worker=p}self.asyncProxyScriptBlob.i(z,"AsyncProxySlaveSingleton");return f}var B=z();function C(){function b(){this.U={};this.w=null}b.prototype.La=function(a){a=b.S(a);this.U[a]||(this.U[a]=!0,this.w=null)};b.prototype.Pa=function(){if(null===this.w){this.w=[];for(var a in this.U)this.w.push(a)}return this.w};b.S=function(a){var c=a.stack.trim(),d=/at (|[^ ]+ \()([^ ]+):\d+:\d+/.exec(c);if(d&&""!==d[2])return d[2];if((d=(new RegExp(/.+\/(.*?):\d+(:\d+)*$/)).exec(c))&&""!==d[1])return d[1];if(void 0!=a.fileName)return a.fileName;throw"ImageDecoderFramework.js: Could not get current script URL";
};self.asyncProxyScriptBlob.i(C,"ScriptsToImportPool");return b}var A=C();var D=function(){function b(){this.R={g:null,I:this};this.F={f:null,I:this};this.D=0;this.F.g=this.R;this.R.f=this.F}b.prototype.add=function(a,c){if(null===c||void 0===c)c=this.F;this.K(c);++this.D;var d={Ja:a,f:c,g:c.g,I:this};d.g.f=d;return c.g=d};b.prototype.remove=function(a){this.K(a);--this.D;a.g.f=a.f;a.f.g=a.g;a.I=null};b.prototype.oa=function(a){this.K(a);return a.Ja};b.prototype.na=function(){return this.$(this.R)};b.prototype.$=function(a){this.K(a);return a.f===this.F?null:a.f};b.prototype.K=
function(a){if(a.I!==this)throw"iterator must be of the current LinkedList";};return b}();var E=function(){function b(a){this.P=[];this.fa=a}b.prototype.bb=function(a,c){var d=this.fa.getHashCode(a),b=this.P[d];b||(b=new D,this.P[d]=b);d={Ca:d,ea:b,h:null};for(d.h=b.na();null!==d.h;){var e=b.oa(d.h);if(this.fa.isEqual(e.key,a))return{iterator:d,ra:!1,value:e.value};d.h=b.$(d.h)}e=c();d.h=b.add({key:a,value:e});return{iterator:d,ra:!0,value:e}};b.prototype.remove=function(a){a.ea.remove(a.h);0===a.ea.D&&delete this.P[a.Ca]};return b}();function F(){function b(a,d,b,e){this.Ka=e;this.Ba=d;this.Aa=b;this.Fa=a;this.Ia=new E(e);this.Y=[]}var a=self.asyncProxyScriptBlob;b.prototype.va=function(a,d){var b=this.Ia.bb(a,function(){return{fb:!1,s:0,ta:null,pa:!1,qa:!1,ba:!1,ca:null,N:null,o:[],B:new D,M:[],wa:function(){for(var a=this.o,c=0;c<a.length;++c)a[c].unregister();this.o=[]}}}),e=b.value,k=this.za(e,d);b.ra&&this.Ha(a,e);return k};b.prototype.za=function(a,d){var b={a:a,A:null,G:0,Ea:d,hasData:function(){return this.a.pa},getLastData:function(){return this.a.ta},
setPriority:function(a){if(!this.A)throw"AsyncProxy.DependencyWorkers: Already unregistered";this.ha(a>this.a.s?a:this.G<this.a.s?this.a.s:this.ga())},unregister:function(){if(!this.A)throw"AsyncProxy.DependencyWorkers: Already unregistered";this.a.B.remove(this.A);this.A=null;0==this.a.B.D?(this.a.wa(),this.a.N.unregistered()):this.G===this.a.s&&this.ha(this.ga())},ga:function(){for(var a=this.a.B,b=a[0].G,c=1;c<a.length;++c)b=Math.max(b,a[c].G);return b},ha:function(a){if(this.a.s!==a){this.a.s=
a;this.a.N.setPriority(a);for(var b=this.a.o,c=0;c<b.length;++c)b[c].setPriority(a)}}};b.A=a.B.add(b);return b};b.prototype.Ha=function(a,b){taskContext=this.Ka.createTaskContext(a,function(f){b.qa?(b.ca=f,b.ba=!0):e.ia(b,f,a)},function(){if(isTerminated)throw"AsyncProxy.DependencyWorkers: already terminated";b.wa()});b.N=taskContext;var f=taskContext.dependsOnTasks;if(!taskContext.setPriority)throw"AsyncProxy.DependencyWorkers: missing taskContext.setPriority()";if(!taskContext.unregistered)throw"AsyncProxy.DependencyWorkers: missing taskContext.unregistered()";
if(f&&!taskContext.onDependencyTaskResult)throw"AsyncProxy.DependencyWorkers: Cannot accept dependsOnTasks without onDependencyTaskResult in taskContext";var e=this;b.M=Array(f.length);for(var k=0;k<f.length;++k){b.M[k]=!1;var n;(function(a){n=e.va(f[a],function(c){b.N.onDependencyTaskResult(c,f[a]);b.M[a]=!0})})(k);b.o.push(n)}setTimeout(function(){for(var a=0;a<b.o.length;++a){var c=b.o[a];if(!b.M[a]&&c.hasData())taskContext.onDependencyTaskResult(c.getLastData,f[a])}})};b.prototype.ia=function(a,
b,f){var e=this,k;k=0<e.Y.length?e.Y.pop():new y(e.Fa,e.Ba,e.Aa);a.qa=!0;k.ja("start",[b,f],{isReturnPromise:!0}).then(function(b){a.pa=!0;a.ta=b;for(var d=a.B,e=d.na();null!=e;){var g=d.oa(e),e=d.$(e);g.Ea(b,f)}})["catch"](function(a){console.log("Error in DependencyWorkers' worker: "+a)}).then(function(){e.Y.push(k);if(a.ba){var b=a.ca;a.ba=!1;a.ca=null;e.ia(a,b)}})};a.i(F,"DependencyWorkers");return b}var G=F();function I(){asyncProxyScriptBlob.i(I,"ExportAsyncProxySymbols");asyncProxyScriptBlob.m("ExportAsyncProxySymbols(SubWorkerEmulationForChrome, AsyncProxySlaveSingleton, AsyncProxyMaster, ScriptsToImportPool, DependencyWorkers);");asyncProxyScriptBlob.m("self['AsyncProxy']['AsyncProxySlaveSingleton'] = AsyncProxySlaveSingleton;");asyncProxyScriptBlob.m("self['AsyncProxy']['AsyncProxyMaster'] = AsyncProxyMaster;");asyncProxyScriptBlob.m("self['AsyncProxy']['ScriptsToImportPool'] = ScriptsToImportPool;");
asyncProxyScriptBlob.m("self['AsyncProxy']['DependencyWorkers'] = DependencyWorkers;");return function(b,a,c,d,f){self.AsyncProxy=self.AsyncProxy||{};b.prototype.postMessage=b.prototype.postMessage;b.prototype.terminate=b.prototype.terminate;a.setSlaveSideCreator=a.Za;a.setBeforeOperationListener=a.Ya;a.sendUserDataToMaster=a.Xa;a.wrapPromiseFromSlaveSide=a.ya;a.wrapCallbackFromSlaveSide=a.xa;c.prototype.setUserDataHandler=c.prototype.$a;c.prototype.terminate=c.prototype.terminate;c.prototype.callFunction=
c.prototype.ja;c.prototype.wrapCallback=c.prototype.eb;c.prototype.freeCallback=c.prototype.la;c.getEntryUrl=c.ma;d.prototype.addScriptFromErrorWithStackTrace=d.prototype.La;d.prototype.getScriptsForWorkerImport=d.prototype.Pa;f.prototype.startTask=f.prototype.va}}I()(w,B,y,A,G);self.AsyncProxy.AsyncProxySlaveSingleton=B;self.AsyncProxy.AsyncProxyMaster=y;self.AsyncProxy.ScriptsToImportPool=A;self.AsyncProxy.DependencyWorkers=G;
