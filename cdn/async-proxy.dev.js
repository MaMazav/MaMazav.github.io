var u=t();self.asyncProxyScriptBlob=new u;
function t(){function b(){this.b=["'use strict';"];this.F=this.m=null;this.h(t,"BlobScriptGenerator");this.l("var asyncProxyScriptBlob = new BlobScriptGenerator();")}b.prototype.h=function(a,b){if(this.m)throw Error("Cannot add member to AsyncProxyScriptBlob after blob was used");b&&(this.b.push("var "),this.b.push(b),this.b.push(" = "));this.b.push("(");this.b.push(a.toString());this.b.push(")();")};b.prototype.l=function(a){if(this.m)throw Error("Cannot add statement to AsyncProxyScriptBlob after blob was used");this.b.push(a)};
b.prototype.getBlob=function(){this.m||(this.m=new Blob(this.b,{type:"application/javascript"}));return this.m};b.prototype.sa=function(){this.F||(this.F=URL.createObjectURL(this.getBlob()));return this.F};return b};function v(){function b(c){if(null===f)throw"AsyncProxy internal error: SubWorkerEmulationForChrome not initialized";this.B=++a;f[this.B]=this;self.postMessage({type:"subWorkerCtor",j:this.B,Ca:c})}var a=0,f=null;b.wa=function(a){f=a};b.prototype.postMessage=function(a,b){self.postMessage({type:"subWorkerPostMessage",j:this.B,data:a},b)};b.prototype.terminate=function(a,b){self.postMessage({type:"subWorkerTerminate",j:this.B},b)};self.asyncProxyScriptBlob.h(v,"SubWorkerEmulationForChrome");return b}
var w=v();function x(){function b(g,G,e,c){var d=this;c=c||{};var h=a.toString(),h=h.replace("SCRIPT_PLACEHOLDER",k.sa()),h=URL.createObjectURL(new Blob(["(",h,")()"],{type:"application/javascript"}));d.u=[];d.o=[];d.M=[];d.N=[];d.D=new Worker(h);d.D.onmessage=function(g){f(d,g)};d.O=null;d.w=0;d.T=c.functionsBufferSize||5;d.K=[];d.D.postMessage({R:"ctor",Da:g,ra:G,i:e,a:++m,ba:!1,Aa:b.$()})}function a(){importScripts("SCRIPT_PLACEHOLDER");AsyncProxy.AsyncProxySlave=self.AsyncProxy.AsyncProxySlaveSingleton;
AsyncProxy.AsyncProxySlave.ja()}function f(g,a){var e=a.data.a;switch(a.data.type){case "functionCalled":--g.w;h(g);break;case "promiseResult":var b=g.o[e];delete g.o[e];b.resolve(a.data.result);break;case "promiseFailure":b=g.o[e];delete g.o[e];b.reject(a.data.reason);break;case "userData":null!==g.O&&g.O(a.data.Ka);break;case "callback":e=g.u[a.data.a];if(void 0===e)throw"Unexpected message from SlaveWorker of callback ID: "+a.data.a+". Maybe should indicate isMultipleTimesCallback = true on creation?";
e.S||g.Z(g.u[a.data.a]);null!==e.Y&&e.Y.apply(null,a.data.i);break;case "subWorkerCtor":var e=new Worker(a.data.Ca),d=a.data.j;g.M[d]=e;g.N.push(e);e.onmessage=function(a){c(g,a.ports,!1,{R:"subWorkerOnMessage",j:d,data:a.data})};break;case "subWorkerPostMessage":e=g.M[a.data.j];e.postMessage(a.data.data);break;case "subWorkerTerminate":e=g.M[a.data.j];e.terminate();break;default:throw"Unknown message from AsyncProxySlave of type: "+a.data.type;}}function c(g,a,e,b){g.w>=g.T?g.K.push({Ia:a,xa:e,message:b}):
d(g,a,e,b)}function d(g,a,b,c){b&&++g.w;g.D.postMessage(c,a)}function h(g){for(;g.w<g.T&&0<g.K.length;){var a=g.K.shift();d(g,a.Ia,a.xa,a.message)}}var k=self.asyncProxyScriptBlob,m=0,n=!1,q=function(){var g=location.href,a=g.lastIndexOf("/");0<=a&&(g=g.substring(0,a));return g}();b.prototype.Ha=function(a){this.O=a};b.prototype.terminate=function(){this.D.terminate();for(var a=0;a<this.N.length;++a)this.N[a].terminate()};b.prototype.X=function(a,b,e){e=e||{};var f=!!e.isReturnPromise,h=e.transferables,
k=e.pathsToTransferablesInPromiseResult,l=++m,p=null,n=this;f&&(p=new Promise(function(a,g){n.o[l]={resolve:a,reject:g}}));(e.isSendImmediately?d:c)(this,h,!0,{R:a,i:b||[],a:l,ba:f,Ba:k});if(f)return p};b.prototype.La=function(a,b,e){e=e||{};var c=++m;b={za:!0,S:!!e.isMultipleTimeCallback,a:c,qa:b,ca:e.pathsToTransferables};this.u[c]={S:!!e.isMultipleTimeCallback,a:c,Y:a,ca:e.pathsToTransferables};return b};b.prototype.Z=function(a){delete this.u[a.a]};b.$=function(){n=!0;return q};b.la=function(a){if(q!==
a&&n)throw"Previous values returned from getMasterEntryUrl is wrong. Avoid calling it within the slave c`tor";q=a};k.h(x,"AsyncProxyMaster");return b}var y=x();function z(){function b(){var a;try{for(var b=n.split("."),e=self,d=0;d<b.length;++d)e=e[b[d]];var b=e,f=[null].concat(c(arguments));a=new (Function.prototype.bind.apply(b,f))}catch(h){throw Error("Failed locating class name "+n+": "+h);}return a}function a(a,b){if(void 0!==a){for(var e=Array(a.length),c=0;c<a.length;++c){for(var d=a[c],f=b,h=0;h<d.length;++h)f=f[d[h]];e[c]=f}return e}}function f(a){var c=a.data.R,e=a.data.i,f=a.data.a,h=a.data.ba,q=a.data.Ba;switch(c){case "ctor":self.AsyncProxy.AsyncProxyMaster.la(a.data.Aa);
f=a.data.Da;n=a.data.ra;for(var l=0;l<f.length;++l)importScripts(f[l]);k=b.apply(null,e);return;case "subWorkerOnMessage":m[a.data.j].onmessage({data:a.data.data});return}e=Array(a.data.i.length);for(l=0;l<a.data.i.length;++l){var p=a.data.i[l];void 0!==p&&null!==p&&p.za&&(p=d.ea(p));e[l]=p}for(var l=k,r;l&&!(r=k[c]);)l=l.__proto__;if(!r)throw"AsyncProxy error: could not find function "+r;e=r.apply(k,e);h&&d.fa(f,e,q);self.postMessage({type:"functionCalled",a:a.data.a,result:null})}function c(a){for(var b=
Array(a.length),c=0;c<a.length;++c)b[c]=a[c];return b}var d={},h=null,k,m={},n;d.ja=function(){self.onmessage=f};d.Ga=function(a){b=a};d.Fa=function(a){h=a};d.Ea=function(a){self.postMessage({type:"userData",Ka:a})};d.fa=function(b,c,d){c.then(function(c){var f=a(d,c);self.postMessage({type:"promiseResult",a:b,result:c},f)})["catch"](function(a){self.postMessage({type:"promiseFailure",a:b,reason:a})})};d.ea=function(b){var d=!1;return function(){if(d)throw"Callback is called twice but isMultipleTimeCallback = false";
var f=c(arguments);if(null!==h)try{h.call(k,"callback",b.qa,f)}catch(m){console.log("AsyncProxySlave.beforeOperationListener has thrown an exception: "+m)}var n=a(b.ca,f);self.postMessage({type:"callback",a:b.a,i:f},n);b.S||(d=!0)}};d.J=function(){return A.J(Error())};if(void 0===self.Worker){var q=self.SubWorkerEmulationForChrome;q.wa(m);self.Worker=q}self.asyncProxyScriptBlob.h(z,"AsyncProxySlaveSingleton");return d}var B=z();function C(){function b(){this.L={};this.s=null}b.prototype.pa=function(a){a=b.J(a);this.L[a]||(this.L[a]=!0,this.s=null)};b.prototype.ua=function(){if(null===this.s){this.s=[];for(var a in this.L)this.s.push(a)}return this.s};b.J=function(a){var b=a.stack.trim(),c=/at (|[^ ]+ \()([^ ]+):\d+:\d+/.exec(b);if(c&&""!==c[2])return c[2];if((c=(new RegExp(/.+\/(.*?):\d+(:\d+)*$/)).exec(b))&&""!==c[1])return c[1];if(void 0!=a.fileName)return a.fileName;throw"ImageDecoderFramework.js: Could not get current script URL";
};self.asyncProxyScriptBlob.h(C,"ScriptsToImportPool");return b}var A=C();var D=function(){function b(){this.I={f:null,A:this};this.v={c:null,A:this};this.H=0;this.v.f=this.I;this.I.c=this.v}b.prototype.add=function(a,b){if(null===b||void 0===b)b=this.v;this.C(b);++this.H;var c={ma:a,c:b,f:b.f,A:this};c.f.c=c;return b.f=c};b.prototype.remove=function(a){this.C(a);--this.H;a.f.c=a.c;a.c.f=a.f;a.A=null};b.prototype.va=function(a){this.C(a);return a.ma};b.prototype.ta=function(){return this.aa(this.I)};b.prototype.aa=function(a){this.C(a);return a.c===this.v?null:a.c};b.prototype.C=
function(a){if(a.A!==this)throw"iterator must be of the current LinkedList";};return b}();var E=function(){function b(a){this.G=[];this.V=a}b.prototype.Ja=function(a,b){var c=this.V.getHashCode(a),d=this.G[c];d||(d=new D,this.G[c]=d);c={ia:c,U:d,g:null};for(c.g=d.ta();null!==c.g;){var h=d.va(c.g);if(this.V.isEqual(h.key,a))return{iterator:c,ya:!1,value:h.value};c.g=d.aa(c.g)}h=b();c.g=d.add({key:a,value:h});return{iterator:c,ya:!0,value:h}};b.prototype.remove=function(a){a.U.remove(a.g);0===a.U.H&&delete this.G[a.ia]};return b}();function F(){function b(a,b,d,h){this.oa=h;this.ha=b;this.ga=d;this.ka=a;this.W=new E(h);this.P=[]}var a=self.asyncProxyScriptBlob;b.prototype.da=function(a){var b=this,d=b.W.Ja(a,function(){return new Promise(function(h,k){b.na(a).then(function(a){b.W.remove(d.iterator);h(a)})["catch"](k)})});return d.value};b.prototype.na=function(a){var b=this.oa.getWorkerInput(a),d=b.resultPromise,h=b.dependantTasks;if(d){if(h&&0<h.length)throw"AsyncProxy.DependencyWorkers: Cannot accept both resultPromise and dependantTasks";
return d}for(var k=[],b=0;b<h.length;++b)k.push(this.da(h[b]));var m=this;return new Promise(function(b,c){Promise.all(k).then(function(d){var k;k=0<m.P.length?m.P.pop():new y(m.ka,m.ha,m.ga);k.X("start",[d,h,a],{isReturnPromise:!0}).then(b)["catch"](c).then(function(){m.P.push(k)})})})};a.h(F,"DependencyWorkers");return b}var H=F();function I(){asyncProxyScriptBlob.h(I,"ExportAsyncProxySymbols");asyncProxyScriptBlob.l("ExportAsyncProxySymbols(SubWorkerEmulationForChrome, AsyncProxySlaveSingleton, AsyncProxyMaster, ScriptsToImportPool, DependencyWorkers);");asyncProxyScriptBlob.l("self['AsyncProxy']['AsyncProxySlaveSingleton'] = AsyncProxySlaveSingleton;");asyncProxyScriptBlob.l("self['AsyncProxy']['AsyncProxyMaster'] = AsyncProxyMaster;");asyncProxyScriptBlob.l("self['AsyncProxy']['ScriptsToImportPool'] = ScriptsToImportPool;");
asyncProxyScriptBlob.l("self['AsyncProxy']['DependencyWorkers'] = DependencyWorkers;");return function(b,a,f,c,d){self.AsyncProxy=self.AsyncProxy||{};b.prototype.postMessage=b.prototype.postMessage;b.prototype.terminate=b.prototype.terminate;a.setSlaveSideCreator=a.Ga;a.setBeforeOperationListener=a.Fa;a.sendUserDataToMaster=a.Ea;a.wrapPromiseFromSlaveSide=a.fa;a.wrapCallbackFromSlaveSide=a.ea;f.prototype.setUserDataHandler=f.prototype.Ha;f.prototype.terminate=f.prototype.terminate;f.prototype.callFunction=
f.prototype.X;f.prototype.wrapCallback=f.prototype.La;f.prototype.freeCallback=f.prototype.Z;f.getEntryUrl=f.$;c.prototype.addScriptFromErrorWithStackTrace=c.prototype.pa;c.prototype.getScriptsForWorkerImport=c.prototype.ua;d.prototype.startTask=d.prototype.da}}I()(w,B,y,A,H);self.AsyncProxy.AsyncProxySlaveSingleton=B;self.AsyncProxy.AsyncProxyMaster=y;self.AsyncProxy.ScriptsToImportPool=A;self.AsyncProxy.DependencyWorkers=H;
