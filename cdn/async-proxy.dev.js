var u=t();self.asyncProxyScriptBlob=new u;
function t(){function b(){this.b=["'use strict';"];this.F=this.m=null;this.h(t,"BlobScriptGenerator");this.l("var asyncProxyScriptBlob = new BlobScriptGenerator();")}b.prototype.h=function(a,b){if(this.m)throw Error("Cannot add member to AsyncProxyScriptBlob after blob was used");b&&(this.b.push("var "),this.b.push(b),this.b.push(" = "));this.b.push("(");this.b.push(a.toString());this.b.push(")();")};b.prototype.l=function(a){if(this.m)throw Error("Cannot add statement to AsyncProxyScriptBlob after blob was used");this.b.push(a)};
b.prototype.getBlob=function(){this.m||(this.m=new Blob(this.b,{type:"application/javascript"}));return this.m};b.prototype.qa=function(){this.F||(this.F=URL.createObjectURL(this.getBlob()));return this.F};return b};function v(){function b(b){if(null===f)throw"AsyncProxy internal error: SubWorkerEmulationForChrome not initialized";this.B=++a;f[this.B]=this;self.postMessage({type:"subWorkerCtor",j:this.B,Aa:b})}var a=0,f=null;b.ua=function(a){f=a};b.prototype.postMessage=function(a,b){self.postMessage({type:"subWorkerPostMessage",j:this.B,data:a},b)};b.prototype.terminate=function(a,b){self.postMessage({type:"subWorkerTerminate",j:this.B},b)};self.asyncProxyScriptBlob.h(v,"SubWorkerEmulationForChrome");return b}
var w=v();function x(){function b(g,G,e,d){var c=this;d=d||{};var q=a.toString(),q=q.replace("SCRIPT_PLACEHOLDER",m.qa()),q=URL.createObjectURL(new Blob(["(",q,")()"],{type:"application/javascript"}));c.u=[];c.o=[];c.M=[];c.N=[];c.D=new Worker(q);c.D.onmessage=function(g){f(c,g)};c.O=null;c.w=0;c.T=d.functionsBufferSize||5;c.K=[];c.D.postMessage({R:"ctor",Ba:g,pa:G,i:e,a:++l,ba:!1,ya:b.$()})}function a(){importScripts("SCRIPT_PLACEHOLDER");AsyncProxy.AsyncProxySlave=self.AsyncProxy.AsyncProxySlaveSingleton;
AsyncProxy.AsyncProxySlave.ia()}function f(g,a){var e=a.data.a;switch(a.data.type){case "functionCalled":--g.w;h(g);break;case "promiseResult":var b=g.o[e];delete g.o[e];b.resolve(a.data.result);break;case "promiseFailure":b=g.o[e];delete g.o[e];b.reject(a.data.reason);break;case "userData":null!==g.O&&g.O(a.data.Ja);break;case "callback":e=g.u[a.data.a];if(void 0===e)throw"Unexpected message from SlaveWorker of callback ID: "+a.data.a+". Maybe should indicate isMultipleTimesCallback = true on creation?";
e.S||g.Z(g.u[a.data.a]);null!==e.Y&&e.Y.apply(null,a.data.i);break;case "subWorkerCtor":var e=new Worker(a.data.Aa),c=a.data.j;g.M[c]=e;g.N.push(e);e.onmessage=function(a){d(g,a.ports,!1,{R:"subWorkerOnMessage",j:c,data:a.data})};break;case "subWorkerPostMessage":e=g.M[a.data.j];e.postMessage(a.data.data);break;case "subWorkerTerminate":e=g.M[a.data.j];e.terminate();break;default:throw"Unknown message from AsyncProxySlave of type: "+a.data.type;}}function d(g,a,b,d){g.w>=g.T?g.K.push({Ha:a,va:b,message:d}):
c(g,a,b,d)}function c(g,a,b,c){b&&++g.w;g.D.postMessage(c,a)}function h(g){for(;g.w<g.T&&0<g.K.length;){var a=g.K.shift();c(g,a.Ha,a.va,a.message)}}var m=self.asyncProxyScriptBlob,l=0,p=!1,n=function(){var a=location.href,b=a.lastIndexOf("/");0<=b&&(a=a.substring(0,b));return a}();b.prototype.Fa=function(a){this.O=a};b.prototype.terminate=function(){this.D.terminate();for(var a=0;a<this.N.length;++a)this.N[a].terminate()};b.prototype.X=function(a,b,e){e=e||{};var f=!!e.isReturnPromise,h=e.transferables,
q=e.pathsToTransferablesInPromiseResult,k=++l,m=null,p=this;f&&(m=new Promise(function(a,g){p.o[k]={resolve:a,reject:g}}));(e.isSendImmediately?c:d)(this,h,!0,{R:a,i:b||[],a:k,ba:f,za:q});if(f)return m};b.prototype.Ka=function(a,b,e){e=e||{};var c=++l;b={xa:!0,S:!!e.isMultipleTimeCallback,a:c,oa:b,ca:e.pathsToTransferables};this.u[c]={S:!!e.isMultipleTimeCallback,a:c,Y:a,ca:e.pathsToTransferables};return b};b.prototype.Z=function(a){delete this.u[a.a]};b.$=function(){p=!0;return n};b.ka=function(a){if(n!==
a&&p)throw"Previous values returned from getMasterEntryUrl is wrong. Avoid calling it within the slave c`tor";n=a};m.h(x,"AsyncProxyMaster");return b}var y=x();function z(){function b(){var a;try{for(var b=p.split("."),e=self,c=0;c<b.length;++c)e=e[b[c]];var b=e,f=[null].concat(d(arguments));a=new (Function.prototype.bind.apply(b,f))}catch(h){throw Error("Failed locating class name "+p+": "+h);}return a}function a(a,b){if(void 0!==a){for(var c=Array(a.length),d=0;d<a.length;++d){for(var f=a[d],h=b,k=0;k<f.length;++k)h=h[f[k]];c[d]=h}return c}}function f(a){var d=a.data.R,e=a.data.i,f=a.data.a,h=a.data.ba,q=a.data.za;switch(d){case "ctor":self.AsyncProxy.AsyncProxyMaster.ka(a.data.ya);
f=a.data.Ba;p=a.data.pa;for(var k=0;k<f.length;++k)importScripts(f[k]);m=b.apply(null,e);return;case "subWorkerOnMessage":l[a.data.j].onmessage({data:a.data.data});return}e=Array(a.data.i.length);for(k=0;k<a.data.i.length;++k){var n=a.data.i[k];void 0!==n&&null!==n&&n.xa&&(n=c.da(n));e[k]=n}for(var k=m,r;k&&!(r=m[d]);)k=k.__proto__;if(!r)throw"AsyncProxy error: could not find function "+r;e=r.apply(m,e);h&&c.ea(f,e,q);self.postMessage({type:"functionCalled",a:a.data.a,result:null})}function d(a){for(var b=
Array(a.length),c=0;c<a.length;++c)b[c]=a[c];return b}var c={},h=null,m,l={},p;c.ia=function(){self.onmessage=f};c.Ea=function(a){b=a};c.Da=function(a){h=a};c.Ca=function(a){self.postMessage({type:"userData",Ja:a})};c.ea=function(b,c,d){c.then(function(c){var f=a(d,c);self.postMessage({type:"promiseResult",a:b,result:c},f)})["catch"](function(a){self.postMessage({type:"promiseFailure",a:b,reason:a})})};c.da=function(b){var c=!1;return function(){if(c)throw"Callback is called twice but isMultipleTimeCallback = false";
var f=d(arguments);if(null!==h)try{h.call(m,"callback",b.oa,f)}catch(l){console.log("AsyncProxySlave.beforeOperationListener has thrown an exception: "+l)}var n=a(b.ca,f);self.postMessage({type:"callback",a:b.a,i:f},n);b.S||(c=!0)}};c.J=function(){return A.J(Error())};if(void 0===self.Worker){var n=self.SubWorkerEmulationForChrome;n.ua(l);self.Worker=n}self.asyncProxyScriptBlob.h(z,"AsyncProxySlaveSingleton");return c}var B=z();function C(){function b(){this.L={};this.s=null}b.prototype.na=function(a){a=b.J(a);this.L[a]||(this.L[a]=!0,this.s=null)};b.prototype.sa=function(){if(null===this.s){this.s=[];for(var a in this.L)this.s.push(a)}return this.s};b.J=function(a){var b=a.stack.trim(),d=/at (|[^ ]+ \()([^ ]+):\d+:\d+/.exec(b);if(d&&""!==d[2])return d[2];if((d=(new RegExp(/.+\/(.*?):\d+(:\d+)*$/)).exec(b))&&""!==d[1])return d[1];if(void 0!=a.fileName)return a.fileName;throw"ImageDecoderFramework.js: Could not get current script URL";
};self.asyncProxyScriptBlob.h(C,"ScriptsToImportPool");return b}var A=C();var D=function(){function b(){this.I={f:null,A:this};this.v={c:null,A:this};this.H=0;this.v.f=this.I;this.I.c=this.v}b.prototype.add=function(a,b){if(null===b||void 0===b)b=this.v;this.C(b);++this.H;var d={ma:a,c:b,f:b.f,A:this};d.f.c=d;return b.f=d};b.prototype.remove=function(a){this.C(a);--this.H;a.f.c=a.c;a.c.f=a.f;a.A=null};b.prototype.ta=function(a){this.C(a);return a.ma};b.prototype.ra=function(){return this.aa(this.I)};b.prototype.aa=function(a){this.C(a);return a.c===this.v?null:a.c};b.prototype.C=
function(a){if(a.A!==this)throw"iterator must be of the current LinkedList";};return b}();var E=function(){function b(a){this.G=[];this.V=a}b.prototype.Ia=function(a,b){var d=this.V.getHashCode(a),c=this.G[d];c||(c=new D,this.G[d]=c);d={ha:d,U:c,g:null};for(d.g=c.ra();null!==d.g;){var h=c.ta(d.g);if(this.V.isEqual(h.key,a))return{iterator:d,wa:!1,value:h.value};d.g=c.aa(d.g)}h=b();d.g=c.add({key:a,value:h});return{iterator:d,wa:!0,value:h}};b.prototype.remove=function(a){a.U.remove(a.g);0===a.U.H&&delete this.G[a.ha]};return b}();function F(){function b(a,b,c,h){this.ga=b;this.fa=c;this.ja=a;this.W=new E(h);this.P=[]}var a=self.asyncProxyScriptBlob;b.prototype.Ga=function(a){var b=this,c=b.W.Ia(a,function(){return new Promise(function(h,m){workerInputRetreiver.getWorkerInput(a).then(function(l){b.la(a,c.iterator,l,h,m)})["catch"](m)})});return c.value};b.prototype.la=function(a,b,c,h,m){var l=this,p;p=0<l.P.length?l.P.pop():new y(l.ja,l.ga,l.fa);p.X("start",[c,a],{isReturnPromise:!0}).then(function(a){l.W.remove(b);l.P.push(p);
h(a)})["catch"](m)};a.h(F,"UniqueWorkers");return b}var H=F();function I(){asyncProxyScriptBlob.h(I,"ExportAsyncProxySymbols");asyncProxyScriptBlob.l("ExportAsyncProxySymbols(SubWorkerEmulationForChrome, AsyncProxySlaveSingleton, AsyncProxyMaster, ScriptsToImportPool, UniqueWorkers);");asyncProxyScriptBlob.l("self['AsyncProxy']['AsyncProxySlaveSingleton'] = AsyncProxySlaveSingleton;");asyncProxyScriptBlob.l("self['AsyncProxy']['AsyncProxyMaster'] = AsyncProxyMaster;");asyncProxyScriptBlob.l("self['AsyncProxy']['ScriptsToImportPool'] = ScriptsToImportPool;");
asyncProxyScriptBlob.l("self['AsyncProxy']['UniqueWorkers'] = UniqueWorkers;");return function(b,a,f,d,c){self.AsyncProxy=self.AsyncProxy||{};b.prototype.postMessage=b.prototype.postMessage;b.prototype.terminate=b.prototype.terminate;a.setSlaveSideCreator=a.Ea;a.setBeforeOperationListener=a.Da;a.sendUserDataToMaster=a.Ca;a.wrapPromiseFromSlaveSide=a.ea;a.wrapCallbackFromSlaveSide=a.da;f.prototype.setUserDataHandler=f.prototype.Fa;f.prototype.terminate=f.prototype.terminate;f.prototype.callFunction=
f.prototype.X;f.prototype.wrapCallback=f.prototype.Ka;f.prototype.freeCallback=f.prototype.Z;f.getEntryUrl=f.$;d.prototype.addScriptFromErrorWithStackTrace=d.prototype.na;d.prototype.getScriptsForWorkerImport=d.prototype.sa;c.prototype.startTask=c.prototype.Ga}}I()(w,B,y,A,H);self.AsyncProxy.AsyncProxySlaveSingleton=B;self.AsyncProxy.AsyncProxyMaster=y;self.AsyncProxy.ScriptsToImportPool=A;self.AsyncProxy.UniqueWorkers=H;
