var k=function(){function e(a,c,b,d){var f=this;d=d||{};var n=l.toString(),g=h.w(),n=n.replace("SCRIPT_PLACEHOLDER",g),n=URL.createObjectURL(new Blob(["(",n,")()"],{type:"application/javascript"}));this.e=[];this.d=[];this.j=[];this.k=[];this.h=new Worker(n);this.h.onmessage=function(a){m(f,a)};this.l=null;this.f=0;this.o=d.functionsBufferSize||5;this.i=[];this.h.postMessage({m:"ctor",M:a,F:c,b:b,a:++q,s:!1,J:e.r()})}function l(){importScripts("SCRIPT_PLACEHOLDER");h.A()}function m(a,c){var b=c.data.a;
switch(c.data.type){case "functionCalled":--a.f;u(a);break;case "promiseResult":var d=a.d[b];delete a.d[b];d.resolve(c.data.result);break;case "promiseFailure":d=a.d[b];delete a.d[b];d.reject(c.data.reason);break;case "userData":null!==a.l&&a.l(c.data.S);break;case "callback":b=a.e[c.data.a];if(void 0===b)throw"Unexpected message from SlaveWorker of callback ID: "+c.data.a+". Maybe should indicate isMultipleTimesCallback = true on creation?";b.n||a.q(a.e[c.data.a]);null!==b.p&&b.p.apply(null,c.data.b);
break;case "subWorkerCtor":var b=new Worker(c.data.L),f=c.data.c;a.j[f]=b;a.k.push(b);b.onmessage=function(b){v(a,b.ports,!1,{m:"subWorkerOnMessage",c:f,data:b.data})};break;case "subWorkerPostMessage":b=a.j[c.data.c];b.postMessage(c.data.data);break;case "subWorkerTerminate":b=a.j[c.data.c];b.terminate();break;default:throw"Unknown message from AsyncProxySlave of type: "+c.data.type;}}function v(a,c,b,d){a.f>=a.o?a.i.push({R:c,H:b,message:d}):f(a,c,b,d)}function f(a,c,b,d){b&&++a.f;a.h.postMessage(d,
c)}function u(a){for(;a.f<a.o&&0<a.i.length;){var c=a.i.shift();f(a,c.R,c.H,c.message)}}var q=0,w=!1,r=function(){var a=location.href,c=a.lastIndexOf("/");0<=c&&(a=a.substring(0,c));return a}();e.prototype.Q=function(a){this.l=a};e.prototype.terminate=function(){this.h.terminate();for(var a=0;a<this.k.length;++a)this.k[a].terminate()};e.prototype.C=function(a,c,b){b=b||{};var d=!!b.isReturnPromise,e=b.transferables,n=b.pathsToTransferablesInPromiseResult,g=++q,p=null,m=this;d&&(p=new Promise(function(a,
b){m.d[g]={resolve:a,reject:b}}));(b.isSendImmediately?f:v)(this,e,!0,{m:a,b:c||[],a:g,s:d,K:n});if(d)return p};e.prototype.T=function(a,c,b){b=b||{};var d=++q;c={I:!0,n:!!b.isMultipleTimeCallback,a:d,D:c,t:b.pathsToTransferables};this.e[d]={n:!!b.isMultipleTimeCallback,a:d,p:a,t:b.pathsToTransferables};return c};e.prototype.q=function(a){delete this.e[a.a]};e.r=function(){w=!0;return r};e.B=function(a){if(r!==a&&w)throw"Previous values returned from getMasterEntryUrl is wrong. Avoid calling it within the slave c`tor";
r=a};return e}();var t=function(){function e(e){if(null===m)throw"AsyncProxy internal error: SubWorkerEmulationForChrome not initialized";this.g=++l;m[this.g]=this;self.postMessage({type:"subWorkerCtor",c:this.g,L:e})}var l=0,m=null;e.G=function(e){m=e};e.prototype.postMessage=function(e,f){self.postMessage({type:"subWorkerPostMessage",c:this.g,data:e},f)};e.prototype.terminate=function(e,f){self.postMessage({type:"subWorkerTerminate",c:this.g},f)};return e}(),h=function(){function e(){var a=self[r],c=[null].concat(v(arguments));
return new (Function.prototype.bind.apply(a,c))}function l(a,c){if(void 0!==a){for(var b=Array(a.length),d=0;d<a.length;++d){for(var e=a[d],f=c,g=0;g<e.length;++g)f=f[e[g]];b[d]=f}return b}}function m(a){var c=a.data.m,b=a.data.b,d=a.data.a,m=a.data.s,n=a.data.K;switch(c){case "ctor":k.B(a.data.J);d=a.data.M;r=a.data.F;for(var g=0;g<d.length;++g)importScripts(d[g]);q=e.apply(null,b);return;case "subWorkerOnMessage":w[a.data.c].onmessage({data:a.data.data});return}b=Array(a.data.b.length);for(g=0;g<
a.data.b.length;++g){var p=a.data.b[g];void 0!==p&&null!==p&&p.I&&(p=f.u(p));b[g]=p}for(var g=q,l;g&&!(l=q[c]);)g=g.__proto__;if(!l)throw"AsyncProxy error: could not find function "+l;b=l.apply(q,b);m&&f.v(d,b,n);self.postMessage({type:"functionCalled",a:a.data.a,result:null})}function v(a){for(var c=Array(a.length),b=0;b<a.length;++b)c[b]=a[b];return c}var f={},u=null,q,w={},r;f.A=function(){self.onmessage=m};f.P=function(a){e=a};f.O=function(a){u=a};f.N=function(a){self.postMessage({type:"userData",
S:a})};f.v=function(a,c,b){c.then(function(c){var e=l(b,c);self.postMessage({type:"promiseResult",a:a,result:c},e)})["catch"](function(b){self.postMessage({type:"promiseFailure",a:a,reason:b})})};f.u=function(a){var c=!1;return function(){if(c)throw"Callback is called twice but isMultipleTimeCallback = false";var b=v(arguments);null!==u&&u("callback",a.D,b);var d=l(a.t,b);self.postMessage({type:"callback",a:a.a,b:b},d);a.n||(c=!0)}};f.w=function(){var a=Error(),c=(new RegExp(/.+\/(.*?):\d+(:\d+)*$/)).exec(a.stack.trim());
if(c&&""!==c[1]||(c=(new RegExp(arguments.callee.name+" \\((.+?):\\d+:\\d+\\)")).exec(a.stack.trim()))&&""!==c[1])return c[1];if(void 0!=a.fileName)return a.fileName;throw"AsyncProxy.js: Could not get current script URL";};void 0===self.Worker&&(t.G(w),self.Worker=t);return f}();self.AsyncProxy={};self.AsyncProxy.AsyncProxySlave=h;self.AsyncProxy.AsyncProxyMaster=k;t.prototype.postMessage=t.prototype.postMessage;t.prototype.terminate=t.prototype.terminate;h.setSlaveSideCreator=h.P;h.setBeforeOperationListener=h.O;h.sendUserDataToMaster=h.N;h.wrapPromiseFromSlaveSide=h.v;h.wrapCallbackFromSlaveSide=h.u;k.prototype.setUserDataHandler=k.prototype.Q;k.prototype.terminate=k.prototype.terminate;k.prototype.callFunction=k.prototype.C;k.prototype.wrapCallback=k.prototype.T;
k.prototype.freeCallback=k.prototype.q;k.getEntryUrl=k.r;
